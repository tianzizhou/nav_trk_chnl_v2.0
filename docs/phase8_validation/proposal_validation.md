# 全场景仿真验证 — 技术方案文档

## 1. 概述

全场景仿真验证阶段对系统进行端到端的功能和性能验证，覆盖8个典型场景，
并通过统计指标评估系统表现。

## 2. 验证策略

### 2.1 多层次验证

| 层次 | 内容 | 工具 |
|------|------|------|
| 单元测试 | 各模块功能正确性 | pytest (105+项) |
| 场景仿真 | 端到端流水线 | run_simulation.py |
| 批量评估 | 8场景性能对比 | batch_evaluation.py |

### 2.2 评估指标体系

| 指标 | 符号 | 目标值 | 计算方法 |
|------|------|--------|----------|
| 检测率 | Pd | > 95% | 真实检测数 / 可见GT数 |
| 虚警率 | Pfa | < 1% | FA数 / 总帧数 |
| 3D位置RMSE | RMSE | < 5% dist | sqrt(mean(err²)) |
| 方位角误差 | Δaz | < 0.5° | mean(|az_est - az_gt|) |
| 距离相对误差 | Δr/r | < 5% | mean(|r_est - r_gt|/r_gt) |
| 帧处理时间 | T_frame | 记录 | 各模块计时之和 |

## 3. 场景验证矩阵

| 场景 | 关键验证点 | 特殊设置 |
|------|------------|----------|
| S1 正面迎头 | 深度估计 + TTC | 标准 |
| S2 高速交叉 | 跟踪连续性 | 标准 |
| S3 尾追 | 远距小目标 | 长时15s |
| S4 多目标 | ID管理 | 5目标 |
| S5 机动 | EKF鲁棒性 | 正弦机动 |
| S6 远距离 | 检测灵敏度 | 长时15s |
| S7 杂波 | FAR控制 | 高FAR设置 |
| S8 遮挡 | 跟踪恢复 | 1s遮挡期 |

## 4. 风险

| 风险 | 缓解 |
|------|------|
| 仿真耗时长 | 使用低帧率(10fps)快速验证 |
| 远距场景检测率低 | 预期行为，记录并分析 |
