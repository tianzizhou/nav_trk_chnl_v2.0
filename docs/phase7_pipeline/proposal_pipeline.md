# 处理流水线 — 技术方案文档

## 1. 概述

流水线模块将所有子模块串联为完整的帧级和序列级处理流程。

## 2. 架构方案

**串行流水线**：SceneGen → Detector → DepthEstimator → Tracker → Solver

每帧处理步骤：
1. 场景生成（合成图像+GT）
2. 模拟检测（GT+噪声）
3. 深度估计（视差+尺寸融合）
4. 多目标跟踪（EKF+Hungarian）
5. 位置解算（方位/距离/TTC）

## 3. 全图检测调度

每N帧做一次全图检测（发现新目标），其余帧仅在预测ROI内检测。
默认 N=4（配置参数 `detection.full_detect_interval`）。

## 4. 评估指标

自动计算：检测率、虚警率、3D位置RMSE、距离相对误差、方位角误差、
帧处理时间（均值/最大值/P99）。

## 5. 风险

| 风险 | 缓解 |
|------|------|
| 合成图像生成慢 | 使用低分辨率/低帧率进行快速测试 |
| 深度估计在仿真中使用GT辅助 | 预留真实SGBM接口 |
