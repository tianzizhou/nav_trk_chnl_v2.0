# 立体视觉处理 — 仿真验证文档

## 1. 仿真目的

验证深度估计的精度（视差法、尺寸法、融合法），以及各距离下的误差特性。

## 2. 测试结果

### 2.1 视差法深度精度

| 距离 (m) | 理论视差 (px) | 估计深度 (m) | 相对误差 |
|----------|--------------|-------------|----------|
| 50 | 7.20 | 50.0 | 0.0% ✅ |
| 100 | 3.60 | 100.0 | 0.0% ✅ |
| 200 | 1.80 | 200.0 | 0.0% ✅ |
| 500 | 0.72 | 500.0 | 0.0% ✅ |
| 1000 | 0.36 | 1000.0 | 0.0% ✅ |

(使用理论精确视差值，误差为0；实际中受噪声影响)

### 2.2 尺寸法深度精度

| 距离 (m) | bbox_h (px) | 估计深度 (m) | 相对误差 |
|----------|-------------|-------------|----------|
| 100 | 4.80 | 100.0 | 0.0% ✅ |

### 2.3 融合法测试

| 场景 | 距离 | 融合结果 | 误差 |
|------|------|----------|------|
| 近距离(50m) | 50m | ~50m | < 5% ✅ |
| 远距离(1000m) | 1000m | ~1000m | < 10% ✅ |

### 2.4 边界条件测试

| 测试 | 结果 |
|------|------|
| 无输入 → None, conf=0 | ✅ |
| 负视差 → 忽略 | ✅ |
| bbox_h=0 → 忽略 | ✅ |
| 仅视差模式 | ✅ |
| 仅尺寸模式 | ✅ |

## 3. 结果汇总

**10 项测试全部通过**。深度估计在理论输入下误差为0；融合逻辑正确。

## 4. 结论

深度估计模块数学正确，融合逻辑按设计工作。建议后续与真实噪声的SGBM
输出集成测试时，重点关注远距离场景的融合切换边界。
